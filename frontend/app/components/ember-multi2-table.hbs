{{!--
  The TABLE itself becomes the keyboard focus target (tabindex=0),
  plays the ARIA Grid role, and points to the active row with aria-activedescendant.
--}}
<table
  id="passport-table"
  class="table table-sm w-full select-none"
  role="grid"
  aria-multiselectable="true"
  tabindex="0"
  aria-activedescendant={{this.activeRowId}}
  {{did-insert (action this.registerListeners) }}
  {{on "keydown" this.onKeyDown}}
  {{!-- on "mousedown" this.onMouseDownPreventSelection // Done by other mousedown listener --}}
>
  <thead>
    <tr role="row">
      {{!-- Sortable headers. Keep your existing filter row below. --}}
      {{#each this.columns as |column|}}
        <th
          role="button" {{!-- was columnheader --}}
          class="whitespace-nowrap cursor-pointer select-none"
          {{on "click" (fn this.toggleSort column.property)}}
          title="Click to sort; click again to reverse"
        >

          {{!-- for filtering on this column --}}
          {{#if column.filterOptions.length}}
            <select style="height:100px" class="form-control" multiple onchange={{action (fn this.selectFieldValue column) value="target" }}>
              {{#each column.filterOptions as |filterOption|}}
              <option value={{filterOption}}
                selected={{include (get this.selectedFieldValues column.property) filterOption}}>
                {{filterOption}}</option>
              {{/each}}
            </select>
          {{/if}}

          {{column.header}}
          {{#if (eq this.sortBy column.property)}}
            <span aria-hidden="true">{{if (eq this.sortDir "asc") " ▲" " ▼"}}</span>
          {{/if}}
        </th>
      {{/each}}
    </tr>

    {{!-- Your existing header filter row with <select multiple> per column --}}
    {{yield to="filters-row"}}
  </thead>

  <tbody class="no-select">
    {{#each this.sortedRows as |row rowIndex|}}
    {{!-- log 'row' row rowIndex --}}
      <tr
        id={{concat "row-" (this.rowKey row)}}
        role="row"
        class="{{if (compute this.isSelectedBound  row) "is-selected"}} {{if (eq rowIndex this.focusIndex) "is-focused"}}"
        aria-selected={{compute this.isSelectedBound  row}}
        {{on "click" (fn this.onRowClick row rowIndex)}}
      >
        {{!-- Render cells exactly as you do today --}}
        {{!-- yield row --}}
          {{!-- row[idField] is equivalent to : <td>{{object-at rowIndex this.args.samples} }</td> --}}
          {{#each this.columns as |column|}}
          {{!-- log 'column' column --}}
            <td>{{get row column.property}}</td>
          {{/each}}

      </tr>
    {{/each}}
  </tbody>

</table>
